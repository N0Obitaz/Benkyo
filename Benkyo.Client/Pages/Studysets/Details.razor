@page "/studysets/view/{id}"
@inject NavigationManager NavigationManager
@inject FlashcardService flashcardService
@inject StudysetService studysetService
@inject Studyset studyset
@inject Flashcard flashcard
@rendermode InteractiveWebAssembly

    <div class="flex flex-col min-h-full bg-white text-[#1e293b] font-sans">
    <div class="h-16 border-b border-slate-100 flex items-center justify-between px-8 bg-white sticky top-0 z-10">
        <div class="flex items-center space-x-4">
            <button class="text-slate-400 hover:text-[#0f172a] transition">
                <i class="bi bi-arrow-left text-lg"></i>
            </button>
            <h1 class="text-lg font-bold text-[#0f172a]">@studyset.StudySetName</h1>
        </div>

        <div class="bg-slate-100 p-1 rounded-full flex items-center">
            <button class="px-6 py-1.5 rounded-full text-sm font-bold bg-white shadow-sm text-[#0f172a]">Material</button>
            <button class="px-6 py-1.5 rounded-full text-sm font-medium text-slate-500 hover:text-slate-700">Study Plan</button>
        </div>

        <div class="flex items-center space-x-3">
            <button class="px-4 py-1.5 border border-slate-200 rounded-xl text-sm font-medium hover:bg-slate-50 transition">Share</button>
            <button class="text-slate-400 hover:text-slate-600"><i class="bi bi-three-dots-vertical"></i></button>
        </div>
    </div>

    <div class="p-8 space-y-10 bg-slate-50/30 flex-1">

        <div class="flex items-center space-x-4 max-w-5xl mx-auto">
            <button @onclick="AddFlashcard"class="flex-1 py-4 border-2 border-dashed border-slate-200 rounded-2xl text-slate-400 font-semibold hover:border-slate-300 hover:bg-white transition-all">
                + Add material
            </button>
            <button class="flex-1 py-4 bg-[#0f172a] text-white font-bold rounded-2xl flex items-center justify-center space-x-2 hover:bg-black transition-shadow shadow-sm">
                <i class="bi bi-play-fill text-xl"></i>
                <span>Learn @flashcards.Count flashcards</span>
            </button>
        </div>

        <div class="max-w-5xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest">Flashcards (@flashcards.Count)</h2>
                <button class="text-sm font-bold text-blue-600 hover:underline">Show more</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
@foreach (var card in flashcards.Take(3))
{
                        <div class="bg-white border border-slate-200 p-6 rounded-[2rem] shadow-sm hover:border-blue-400 transition-all cursor-pointer group">
                            <div class="flex items-start justify-between mb-4">
                                <span class="text-[10px] font-bold text-blue-600 uppercase tracking-tight flex items-center bg-blue-50 px-2 py-1 rounded">
                                    <i class="bi bi-file-earmark-pdf mr-1"></i> Unit_6_App...
                                </span>
                                <i class="bi bi-stars text-blue-500/30 group-hover:text-blue-500"></i>
                            </div>
                            <p class="text-[15px] font-medium text-slate-800 leading-snug">@card.Question</p>
                            <div class="mt-6 flex justify-end text-slate-300">
                                <i class="bi bi-three-dots"></i>
                            </div>
                        </div>
}
            </div>
        </div>

        <div class="max-w-5xl mx-auto">
            <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6">Materials</h2>
            <div class="bg-white border border-slate-200 rounded-3xl p-5 flex items-center justify-between hover:bg-slate-50 transition group">
                <div class="flex items-center space-x-4">
                    <div class="w-14 h-14 bg-red-50 rounded-2xl flex items-center justify-center">
                        <i class="bi bi-file-earmark-pdf-fill text-red-500 text-2xl"></i>
                    </div>
                    <div>
                        <h4 class="text-sm font-bold text-[#0f172a] group-hover:text-blue-600 transition">Unit_6_Application_Development.pdf</h4>
                        <p class="text-xs text-slate-500 font-medium mt-0.5">19 pages • @flashcards.Count flashcards</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4 text-slate-300">
                    <i class="bi bi-people text-lg"></i>
                    <button class="hover:text-slate-600 transition"><i class="bi bi-three-dots"></i></button>
                </div>
            </div>
        </div>

        <div class="max-w-3xl mx-auto pt-10">
            <div class="relative">
                <div class="absolute left-5 top-1/2 -translate-y-1/2 text-slate-400">
                    <i class="bi bi-paperclip text-lg"></i>
                </div>
                <input type="text" placeholder="Ask Benkyo anything..."
                       class="w-full bg-white border border-slate-200 rounded-2xl py-4 pl-14 pr-14 focus:outline-none focus:ring-4 focus:ring-blue-500/5 focus:border-blue-400 transition-all text-sm shadow-sm" />
                <div class="absolute right-5 top-1/2 -translate-y-1/2 text-slate-400">
                    <i class="bi bi-send-fill text-lg hover:text-[#0f172a] cursor-pointer transition"></i>
                </div>
            </div>
        </div>
    </div>
</div>



@code {
    [Parameter]
    public string? Id { get; set; }



    private string studySetName = "Sample Study Set";
    private int currentCardIndex = 1;
    private int totalCards = 0;



    private Flashcard? currentCard;
    private List<Flashcard> flashcards = new();

    private string slideState = "center";

    protected override async Task OnInitializedAsync()
    {
        studySetName = "Sample Study Set";

        studyset = await studysetService.GetCurrentStudysetAsync(Id);

        if(studyset.Id != null)
        {
            flashcards = await flashcardService.GetStudysetFlashcardAsync(studyset.Id);
        }




        totalCards = flashcards.Count;
        if (flashcards.Any())
        {
            currentCard = flashcards[0];
        }
    }

    private async Task AddFlashcard()
    {
        await flashcardService.CreateFlashcardAsync();
    }


}
